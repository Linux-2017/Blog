{"title":"Http Configure the source tree","slug":"http-modules","date":"2017-04-29T01:24:28.000Z","updated":"2017-11-19T13:15:37.000Z","comments":true,"excerpt":"","content":"<h3 id=\"Httpd-Configure-the-source-tree\"><a href=\"#Httpd-Configure-the-source-tree\" class=\"headerlink\" title=\"Httpd   Configure the source tree\"></a>Httpd   Configure the source tree</h3><blockquote>\n<p>configure脚本配置Apache的源码树并且将其安装到指定的平台上。</p>\n</blockquote>\n<h4 id=\"语法\"><a href=\"#语法\" class=\"headerlink\" title=\"语法\"></a><strong>语法</strong></h4><blockquote>\n<p>./configure [OPTION]… [VAR=VALUE]…</p>\n</blockquote>\n<h4 id=\"选项\"><a href=\"#选项\" class=\"headerlink\" title=\"选项\"></a><strong>选项</strong></h4><ul>\n<li><p>配置选项</p>\n<blockquote>\n<p>下列选项会影响configure脚本自身的行为。方括号”[]”内是默认值。</p>\n</blockquote>\n\n    <pre><code class=\"lang-shell\">-<span class=\"ruby\">C\n</span>-<span class=\"ruby\">-config-cache  \n</span>    等价于 --cache-file=config.cache\n-<span class=\"ruby\">-cache-file=FILE\n</span>    在FILE文件中缓存测试结果(默认禁用)。\n-<span class=\"ruby\">q\n</span>-<span class=\"ruby\">-quiet\n</span>    不显示脚本工作期间输出的\"checking ...\"消息\n-<span class=\"ruby\">-srcdir=DIR\n</span>    指定源代码所在目录DIR\n</code></pre>\n</li>\n<li><p>安装目录</p>\n<blockquote>\n<p>这些选项控制着安装目录的结构。安装目录的结构取决于所选择的布局。</p>\n</blockquote>\n\n    <pre><code class=\"lang-shell\">--<span class=\"hljs-built_in\">prefix</span>=PREFIX\n    体系无关文件的顶级安装目录PREFIX,也就是Apache的安装目录。默认安装目录[/usr/<span class=\"hljs-built_in\">local</span>/apache2]\n--exec-<span class=\"hljs-built_in\">prefix</span>=EPREFIX\n    体系相关文件的顶级安装目录PEPREFIX,把体系相关文件安装到不同的位置可以方便的在不同主机之间共享体系相关的文件。默认情况下,make install将会把所有文件分别安装到/usr/<span class=\"hljs-built_in\">local</span>/apache2/bin,/usr/<span class=\"hljs-built_in\">local</span>/apache2/lib目录下。可以用--<span class=\"hljs-built_in\">prefix</span>指定一个不同与/usr/<span class=\"hljs-built_in\">local</span>/apache2的安装前缀,比如:--<span class=\"hljs-built_in\">prefix</span>=$HOME\n</code></pre>\n<blockquote>\n<p>定义一个目录布局</p>\n</blockquote>\n\n    <pre><code class=\"lang-shel\">-<span class=\"ruby\">-enable-layout=LAYOUT\n</span>    使用名为LAYOUT的布局配置所有源代码和编译脚本。这样就允许你在安装apache时分别指定不同文件的安装位置。config.lauout文件中包含了默认布局的示例，如下:\n</code></pre>\n\n    <pre><code class=\"lang-shell\">[root@72 httpd-2.4.25]# <span class=\"hljs-keyword\">cat</span> config.layout \n##\n##  config.layout -- Pre-defined Installation Path Layouts\n##\n##  Hints:\n##  - layouts can be loaded with configure's --enable-layout=ID option\n##  - when <span class=\"hljs-keyword\">no</span> --enable-layout option is given, the default layout is <span class=\"hljs-symbol\">`Apache'</span>\n##  - a trailing plus character (`+') <span class=\"hljs-keyword\">on</span> paths is replaced with a \n##    `/&lt;target&gt;' suffix where &lt;target&gt; is currently hardcoded to 'apache2'.\n##    (This may become a configurable parameter at some point.)\n##\n#   Classical Apache path layout.\n&lt;Layout Apache&gt;\n    prefix:        /usr/<span class=\"hljs-keyword\">local</span>/apache2\n    exec_prefix:   <span class=\"hljs-variable\">${prefix}</span>\n    bindir:        <span class=\"hljs-variable\">${exec_prefix}</span>/bin\n    sbindir:       <span class=\"hljs-variable\">${exec_prefix}</span>/bin\n    libdir:        <span class=\"hljs-variable\">${exec_prefix}</span>/lib\n    libexecdir:    <span class=\"hljs-variable\">${exec_prefix}</span>/modules\n    mandir:        <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">man</span>\n    sysconfdir:    <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">conf</span>\n    datadir:       <span class=\"hljs-variable\">${prefix}</span>\n    installbuilddir: <span class=\"hljs-variable\">${datadir}</span>/build\n    errordir:      <span class=\"hljs-variable\">${datadir}</span>/<span class=\"hljs-keyword\">error</span>\n    iconsdir:      <span class=\"hljs-variable\">${datadir}</span>/icons\n    htdocsdir:     <span class=\"hljs-variable\">${datadir}</span>/htdocs\n    manualdir:     <span class=\"hljs-variable\">${datadir}</span>/manual\n    cgidir:        <span class=\"hljs-variable\">${datadir}</span>/cgi-bin\n    includedir:    <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">include</span>\n    localstatedir: <span class=\"hljs-variable\">${prefix}</span>\n    runtimedir:    <span class=\"hljs-variable\">${localstatedir}</span>/logs\n    logfiledir:    <span class=\"hljs-variable\">${localstatedir}</span>/logs\n    proxycachedir: <span class=\"hljs-variable\">${localstatedir}</span>/proxy\n&lt;/Layout&gt;\n#   GNU standards conforming path layout.\n#   See FSF's GNU project `make-stds' document <span class=\"hljs-keyword\">for</span> details.\n&lt;Layout GNU&gt;\n    prefix:        /usr/<span class=\"hljs-keyword\">local</span>\n    exec_prefix:   <span class=\"hljs-variable\">${prefix}</span>\n    bindir:        <span class=\"hljs-variable\">${exec_prefix}</span>/bin\n    sbindir:       <span class=\"hljs-variable\">${exec_prefix}</span>/sbin\n    libdir:        <span class=\"hljs-variable\">${exec_prefix}</span>/lib\n    libexecdir:    <span class=\"hljs-variable\">${exec_prefix}</span>/libexec\n    mandir:        <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">man</span>\n    sysconfdir:    <span class=\"hljs-variable\">${prefix}</span>/etc+\n    datadir:       <span class=\"hljs-variable\">${prefix}</span>/share+\n    installbuilddir: <span class=\"hljs-variable\">${datadir}</span>/build\n    errordir:      <span class=\"hljs-variable\">${datadir}</span>/<span class=\"hljs-keyword\">error</span>\n    iconsdir:      <span class=\"hljs-variable\">${datadir}</span>/icons\n    htdocsdir:     <span class=\"hljs-variable\">${datadir}</span>/htdocs\n    manualdir:     <span class=\"hljs-variable\">${datadir}</span>/manual\n    cgidir:        <span class=\"hljs-variable\">${datadir}</span>/cgi-bin\n    includedir:    <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">include</span>+\n    localstatedir: <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">var</span>+\n    runtimedir:    <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-keyword\">run</span>\n    logfiledir:    <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-built_in\">log</span>\n    proxycachedir: <span class=\"hljs-variable\">${localstatedir}</span>/proxy\n&lt;/Layout&gt;\n#   <span class=\"hljs-keyword\">Mac</span> OS X Server (Rhapsody)\n&lt;Layout <span class=\"hljs-keyword\">Mac</span> OS X Server&gt;\n    prefix:        /<span class=\"hljs-keyword\">Local</span>/Library/WebServer\n    exec_prefix:   /usr\n    bindir:        <span class=\"hljs-variable\">${exec_prefix}</span>/bin\n    sbindir:       <span class=\"hljs-variable\">${exec_prefix}</span>/sbin\n    libdir:        <span class=\"hljs-variable\">${exec_prefix}</span>/lib\n    libexecdir:    /System/Library/Apache/Modules\n    mandir:        <span class=\"hljs-variable\">${exec_prefix}</span>/share/<span class=\"hljs-keyword\">man</span>\n    sysconfdir:    <span class=\"hljs-variable\">${prefix}</span>/Configuration\n    datadir:       <span class=\"hljs-variable\">${prefix}</span>\n    installbuilddir: /System/Library/Apache/Build\n    errordir:      /System/Library/Apache/<span class=\"hljs-keyword\">Error</span>\n    iconsdir:      /System/Library/Apache/Icons\n    manualdir:     /System/Library/Apache/Manual\n    htdocsdir:     <span class=\"hljs-variable\">${datadir}</span>/Documents\n    cgidir:        <span class=\"hljs-variable\">${datadir}</span>/CGI-Executables\n    includedir:    /System/Library/Frameworks/Apache.framework/Versions/2.0/Headers\n    localstatedir: /<span class=\"hljs-keyword\">var</span>\n    runtimedir:    <span class=\"hljs-variable\">${prefix}</span>/Logs\n    logfiledir:    <span class=\"hljs-variable\">${prefix}</span>/Logs\n    proxycachedir: <span class=\"hljs-variable\">${prefix}</span>/ProxyCache\n&lt;/Layout&gt;\n#   Darwin/<span class=\"hljs-keyword\">Mac</span> OS Layout\n&lt;Layout Darwin&gt;\n    prefix:        /usr\n    exec_prefix:   <span class=\"hljs-variable\">${prefix}</span>\n    bindir:        <span class=\"hljs-variable\">${exec_prefix}</span>/bin\n    sbindir:       <span class=\"hljs-variable\">${exec_prefix}</span>/sbin\n    libdir:        <span class=\"hljs-variable\">${exec_prefix}</span>/lib\n    libexecdir:    <span class=\"hljs-variable\">${exec_prefix}</span>/libexec+\n    mandir:        <span class=\"hljs-variable\">${prefix}</span>/share/<span class=\"hljs-keyword\">man</span>\n    datadir:       /Library/WebServer\n    sysconfdir:    /etc+\n    installbuilddir: <span class=\"hljs-variable\">${prefix}</span>/share/httpd/build\n    errordir:      <span class=\"hljs-variable\">${prefix}</span>/share/httpd/<span class=\"hljs-keyword\">error</span>\n    iconsdir:      <span class=\"hljs-variable\">${prefix}</span>/share/httpd/icons\n    htdocsdir:     <span class=\"hljs-variable\">${datadir}</span>/Documents\n    manualdir:     <span class=\"hljs-variable\">${datadir}</span>/share/httpd/manual\n    cgidir:        <span class=\"hljs-variable\">${datadir}</span>/CGI-Executables\n    includedir:    <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">include</span>+\n    localstatedir: /<span class=\"hljs-keyword\">var</span>\n    runtimedir:    <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-keyword\">run</span>\n    logfiledir:    <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-keyword\">log</span>+\n    proxycachedir: <span class=\"hljs-variable\">${runtimedir}</span>/proxy\n&lt;/Layout&gt;\n#   Red Hat Linux 7.x layout\n&lt;Layout RedHat&gt;\n    prefix:        /usr\n    exec_prefix:   <span class=\"hljs-variable\">${prefix}</span>\n    bindir:        <span class=\"hljs-variable\">${prefix}</span>/bin\n    sbindir:       <span class=\"hljs-variable\">${prefix}</span>/sbin\n    libdir:        <span class=\"hljs-variable\">${prefix}</span>/lib\n    libexecdir:    <span class=\"hljs-variable\">${prefix}</span>/lib/apache\n    mandir:        <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">man</span>\n    sysconfdir:    /etc/httpd/<span class=\"hljs-keyword\">conf</span>\n    datadir:       /<span class=\"hljs-keyword\">var</span>/www\n    installbuilddir: <span class=\"hljs-variable\">${datadir}</span>/build\n    errordir:      <span class=\"hljs-variable\">${datadir}</span>/<span class=\"hljs-keyword\">error</span>\n    iconsdir:      <span class=\"hljs-variable\">${datadir}</span>/icons\n    htdocsdir:     <span class=\"hljs-variable\">${datadir}</span>/html\n    manualdir:     <span class=\"hljs-variable\">${datadir}</span>/manual\n    cgidir:        <span class=\"hljs-variable\">${datadir}</span>/cgi-bin\n    includedir:    <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">include</span>/apache\n    localstatedir: /<span class=\"hljs-keyword\">var</span>\n    runtimedir:    <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-keyword\">run</span>\n    logfiledir:    <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-keyword\">log</span>/httpd\n    proxycachedir: <span class=\"hljs-variable\">${localstatedir}</span>/cache/httpd\n&lt;/Layout&gt;     \n#   According to the /opt filesystem conventions\n&lt;Layout opt&gt;\n    prefix:        /opt/apache\n    exec_prefix:   <span class=\"hljs-variable\">${prefix}</span>\n    bindir:        <span class=\"hljs-variable\">${exec_prefix}</span>/bin\n    sbindir:       <span class=\"hljs-variable\">${exec_prefix}</span>/sbin\n    libdir:        <span class=\"hljs-variable\">${exec_prefix}</span>/lib\n    libexecdir:    <span class=\"hljs-variable\">${exec_prefix}</span>/libexec\n    mandir:        <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">man</span>\n    sysconfdir:    /etc<span class=\"hljs-variable\">${prefix}</span>\n    datadir:       <span class=\"hljs-variable\">${prefix}</span>/share\n    installbuilddir: <span class=\"hljs-variable\">${datadir}</span>/build\n    errordir:      <span class=\"hljs-variable\">${datadir}</span>/<span class=\"hljs-keyword\">error</span>\n    iconsdir:      <span class=\"hljs-variable\">${datadir}</span>/icons\n    htdocsdir:     <span class=\"hljs-variable\">${datadir}</span>/htdocs\n    manualdir:     <span class=\"hljs-variable\">${datadir}</span>/manual\n    cgidir:        <span class=\"hljs-variable\">${datadir}</span>/cgi-bin\n    includedir:    <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">include</span>\n    localstatedir: /<span class=\"hljs-keyword\">var</span><span class=\"hljs-variable\">${prefix}</span>\n    runtimedir:    <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-keyword\">run</span>\n    logfiledir:    <span class=\"hljs-variable\">${localstatedir}</span>/logs\n    proxycachedir: <span class=\"hljs-variable\">${localstatedir}</span>/proxy\n&lt;/Layout&gt;\n#   SuSE 6.x layout\n&lt;Layout SuSE&gt;\n    prefix:        /usr\n    exec_prefix:   <span class=\"hljs-variable\">${prefix}</span>\n    bindir:        <span class=\"hljs-variable\">${prefix}</span>/bin\n    sbindir:       <span class=\"hljs-variable\">${prefix}</span>/sbin\n    libdir:        <span class=\"hljs-variable\">${prefix}</span>/lib\n    libexecdir:    <span class=\"hljs-variable\">${prefix}</span>/lib/apache\n    mandir:        <span class=\"hljs-variable\">${prefix}</span>/share/<span class=\"hljs-keyword\">man</span>\n    sysconfdir:    /etc/httpd\n    datadir:       /usr/<span class=\"hljs-keyword\">local</span>/httpd\n    installbuilddir: <span class=\"hljs-variable\">${datadir}</span>/build\n    errordir:      <span class=\"hljs-variable\">${datadir}</span>/<span class=\"hljs-keyword\">error</span>\n    iconsdir:      <span class=\"hljs-variable\">${datadir}</span>/icons\n    htdocsdir:     <span class=\"hljs-variable\">${datadir}</span>/htdocs\n    manualdir:     <span class=\"hljs-variable\">${datadir}</span>/manual\n    cgidir:        <span class=\"hljs-variable\">${datadir}</span>/cgi-bin\n    includedir:    <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">include</span>/apache\n    localstatedir: /<span class=\"hljs-keyword\">var</span>/lib/httpd\n    runtimedir:    /<span class=\"hljs-keyword\">var</span>/<span class=\"hljs-keyword\">run</span>\n    logfiledir:    /<span class=\"hljs-keyword\">var</span>/<span class=\"hljs-keyword\">log</span>/httpd\n    proxycachedir: /<span class=\"hljs-keyword\">var</span>/cache/httpd\n&lt;/Layout&gt;\n#   BSD/OS layout\n&lt;Layout BSDI&gt;\n    prefix:        /<span class=\"hljs-keyword\">var</span>/www\n    exec_prefix:   /usr/contrib\n    bindir:        <span class=\"hljs-variable\">${exec_prefix}</span>/bin\n    sbindir:       <span class=\"hljs-variable\">${exec_prefix}</span>/bin\n    libdir:        <span class=\"hljs-variable\">${exec_prefix}</span>/lib\n    libexecdir:    <span class=\"hljs-variable\">${exec_prefix}</span>/libexec/apache\n    mandir:        <span class=\"hljs-variable\">${exec_prefix}</span>/<span class=\"hljs-keyword\">man</span>\n    sysconfdir:    <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">conf</span>\n    datadir:       <span class=\"hljs-variable\">${prefix}</span>\n    installbuilddir: <span class=\"hljs-variable\">${datadir}</span>/build\n    errordir:      <span class=\"hljs-variable\">${datadir}</span>/<span class=\"hljs-keyword\">error</span>\n    iconsdir:      <span class=\"hljs-variable\">${datadir}</span>/icons\n    htdocsdir:     <span class=\"hljs-variable\">${datadir}</span>/htdocs\n    manualdir:     <span class=\"hljs-variable\">${datadir}</span>/manual\n    cgidir:        <span class=\"hljs-variable\">${datadir}</span>/cgi-bin\n    includedir:    <span class=\"hljs-variable\">${exec_prefix}</span>/<span class=\"hljs-keyword\">include</span>/apache\n    localstatedir: /<span class=\"hljs-keyword\">var</span>\n    runtimedir:    <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-keyword\">run</span>\n    logfiledir:    <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-keyword\">log</span>/httpd\n    proxycachedir: <span class=\"hljs-variable\">${localstatedir}</span>/proxy\n&lt;/Layout&gt;\n#   Solaris 8 Layout\n&lt;Layout Solaris&gt;\n    prefix:        /usr/apache\n    exec_prefix:   <span class=\"hljs-variable\">${prefix}</span>\n    bindir:        <span class=\"hljs-variable\">${exec_prefix}</span>/bin\n    sbindir:       <span class=\"hljs-variable\">${exec_prefix}</span>/bin\n    libdir:        <span class=\"hljs-variable\">${exec_prefix}</span>/lib\n    libexecdir:    <span class=\"hljs-variable\">${exec_prefix}</span>/libexec\n    mandir:        <span class=\"hljs-variable\">${exec_prefix}</span>/<span class=\"hljs-keyword\">man</span>\n    sysconfdir:    /etc/apache\n    datadir:       /<span class=\"hljs-keyword\">var</span>/apache\n    installbuilddir: <span class=\"hljs-variable\">${datadir}</span>/build\n    errordir:      <span class=\"hljs-variable\">${datadir}</span>/<span class=\"hljs-keyword\">error</span>\n    iconsdir:      <span class=\"hljs-variable\">${datadir}</span>/icons\n    htdocsdir:     <span class=\"hljs-variable\">${datadir}</span>/htdocs\n    manualdir:     <span class=\"hljs-variable\">${datadir}</span>/manual\n    cgidir:        <span class=\"hljs-variable\">${datadir}</span>/cgi-bin\n    includedir:    <span class=\"hljs-variable\">${exec_prefix}</span>/<span class=\"hljs-keyword\">include</span>\n    localstatedir: <span class=\"hljs-variable\">${prefix}</span>\n    runtimedir:    /<span class=\"hljs-keyword\">var</span>/<span class=\"hljs-keyword\">run</span>\n    logfiledir:    <span class=\"hljs-variable\">${datadir}</span>/logs\n    proxycachedir: <span class=\"hljs-variable\">${datadir}</span>/proxy\n&lt;/Layout&gt;\n#   OpenBSD Layout\n&lt;Layout OpenBSD&gt;\n    prefix:        /<span class=\"hljs-keyword\">var</span>/www\n    exec_prefix:   /usr\n    bindir:        <span class=\"hljs-variable\">${exec_prefix}</span>/bin\n    sbindir:       <span class=\"hljs-variable\">${exec_prefix}</span>/sbin\n    libdir:        <span class=\"hljs-variable\">${exec_prefix}</span>/lib\n    libexecdir:    <span class=\"hljs-variable\">${exec_prefix}</span>/lib/apache/modules\n    mandir:        <span class=\"hljs-variable\">${exec_prefix}</span>/share/<span class=\"hljs-keyword\">man</span>\n    sysconfdir:    <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">conf</span>\n    datadir:       <span class=\"hljs-variable\">${prefix}</span>\n    installbuilddir: <span class=\"hljs-variable\">${prefix}</span>/build\n    errordir:      <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">error</span>\n    iconsdir:      <span class=\"hljs-variable\">${prefix}</span>/icons\n    htdocsdir:     <span class=\"hljs-variable\">${prefix}</span>/htdocs\n    manualdir:     <span class=\"hljs-variable\">${datadir}</span>/manual\n    cgidir:        <span class=\"hljs-variable\">${prefix}</span>/cgi-bin\n    includedir:    <span class=\"hljs-variable\">${exec_prefix}</span>/lib/apache/<span class=\"hljs-keyword\">include</span>\n    localstatedir: <span class=\"hljs-variable\">${prefix}</span>\n    runtimedir:    <span class=\"hljs-variable\">${prefix}</span>/logs\n    logfiledir:    <span class=\"hljs-variable\">${prefix}</span>/logs\n    proxycachedir: <span class=\"hljs-variable\">${prefix}</span>/proxy\n&lt;/Layout&gt;\n# FreeBSD Layout\n&lt;Layout FreeBSD&gt;\n  prefix:        /usr/<span class=\"hljs-keyword\">local</span>\n  exec_prefix:   <span class=\"hljs-variable\">${prefix}</span>\n  bindir:        <span class=\"hljs-variable\">${exec_prefix}</span>/bin\n  sbindir:       <span class=\"hljs-variable\">${exec_prefix}</span>/sbin\n  libdir:        <span class=\"hljs-variable\">${exec_prefix}</span>/lib\n  libexecdir:    <span class=\"hljs-variable\">${exec_prefix}</span>/libexec/apache2\n  mandir:        <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">man</span>\n  sysconfdir:    <span class=\"hljs-variable\">${prefix}</span>/etc/apache2\n  datadir:       <span class=\"hljs-variable\">${prefix}</span>/www\n  installbuilddir: <span class=\"hljs-variable\">${prefix}</span>/share/apache2/build\n  errordir:      <span class=\"hljs-variable\">${datadir}</span>/<span class=\"hljs-keyword\">error</span>\n  iconsdir:      <span class=\"hljs-variable\">${datadir}</span>/icons\n  htdocsdir:     <span class=\"hljs-variable\">${datadir}</span>/data\n  manualdir:     <span class=\"hljs-variable\">${prefix}</span>/share/doc/apache2\n  cgidir:        <span class=\"hljs-variable\">${datadir}</span>/cgi-bin\n  includedir:    <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">include</span>/apache2\n  localstatedir: /<span class=\"hljs-keyword\">var</span>\n  runtimedir:    <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-keyword\">run</span>\n  logfiledir:    <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-built_in\">log</span>\n  proxycachedir: <span class=\"hljs-variable\">${datadir}</span>/proxy\n&lt;/Layout&gt;\n# Debian layout\n&lt;Layout Debian&gt;\n    prefix:        \n    exec_prefix:   <span class=\"hljs-variable\">${prefix}</span>/usr\n    bindir:        <span class=\"hljs-variable\">${exec_prefix}</span>/bin\n    sbindir:       <span class=\"hljs-variable\">${exec_prefix}</span>/sbin\n    libdir:        <span class=\"hljs-variable\">${exec_prefix}</span>/lib\n    libexecdir:    <span class=\"hljs-variable\">${exec_prefix}</span>/lib/apache2/modules\n    mandir:        <span class=\"hljs-variable\">${exec_prefix}</span>/share/<span class=\"hljs-keyword\">man</span>\n    sysconfdir:    <span class=\"hljs-variable\">${prefix}</span>/etc/apache2\n    datadir:       <span class=\"hljs-variable\">${exec_prefix}</span>/share/apache2\n    iconsdir:      <span class=\"hljs-variable\">${datadir}</span>/icons\n    htdocsdir:     <span class=\"hljs-variable\">${prefix}</span>/usr/share/apache2/default-site/htdocs\n    manualdir:     <span class=\"hljs-variable\">${htdocsdir}</span>/manual\n    cgidir:        <span class=\"hljs-variable\">${prefix}</span>/usr/lib/cgi-bin\n    includedir:    <span class=\"hljs-variable\">${exec_prefix}</span>/<span class=\"hljs-keyword\">include</span>/apache2\n    localstatedir: <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">var</span>/lock/apache2\n    runtimedir:    <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">var</span>/<span class=\"hljs-keyword\">run</span>/apache2\n    logfiledir:    <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">var</span>/<span class=\"hljs-keyword\">log</span>/apache2\n    proxycachedir: <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">var</span>/cache/apache2/proxy\n    infodir:       <span class=\"hljs-variable\">${exec_prefix}</span>/share/info\n    installbuilddir: <span class=\"hljs-variable\">${prefix}</span>/usr/share/apache2/build\n    errordir:      <span class=\"hljs-variable\">${datadir}</span>/<span class=\"hljs-keyword\">error</span>\n&lt;/Layout&gt;\n# Generic RPM layout\n&lt;Layout RPM&gt;\n    prefix:        /usr\n    exec_prefix:   <span class=\"hljs-variable\">${prefix}</span>\n    bindir:        <span class=\"hljs-variable\">${prefix}</span>/bin\n    sbindir:       <span class=\"hljs-variable\">${prefix}</span>/sbin\n    libdir:        <span class=\"hljs-variable\">${prefix}</span>/lib\n    libexecdir:    <span class=\"hljs-variable\">${libdir}</span>/httpd/modules\n    mandir:        <span class=\"hljs-variable\">${prefix}</span>/share/<span class=\"hljs-keyword\">man</span>\n    sysconfdir:    /etc/httpd/<span class=\"hljs-keyword\">conf</span>\n    installbuilddir: <span class=\"hljs-variable\">${libdir}</span>/httpd/build\n    includedir:    <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">include</span>/httpd\n    localstatedir: /<span class=\"hljs-keyword\">var</span>\n    datadir:       <span class=\"hljs-variable\">${localstatedir}</span>/www\n    errordir:      <span class=\"hljs-variable\">${datadir}</span>/<span class=\"hljs-keyword\">error</span>\n    iconsdir:      <span class=\"hljs-variable\">${datadir}</span>/icons\n    htdocsdir:     <span class=\"hljs-variable\">${datadir}</span>/html\n    manualdir:     <span class=\"hljs-variable\">${datadir}</span>/manual\n    cgidir:        <span class=\"hljs-variable\">${datadir}</span>/cgi-bin\n    runtimedir:    <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-keyword\">run</span>\n    logfiledir:    <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-keyword\">log</span>/httpd\n    proxycachedir: <span class=\"hljs-variable\">${localstatedir}</span>/cache/httpd/cache-root\n&lt;/Layout&gt;\n# AIX layout\n&lt;Layout AIX&gt;\n    prefix:        /opt/httpd\n    exec_prefix:   /opt/httpd\n    bindir:        <span class=\"hljs-variable\">${exec_prefix}</span>/bin\n    sbindir:       <span class=\"hljs-variable\">${exec_prefix}</span>/sbin\n    libdir:        <span class=\"hljs-variable\">${exec_prefix}</span>/lib\n    libexecdir:    <span class=\"hljs-variable\">${exec_prefix}</span>/libexec\n    mandir:        /usr/share/<span class=\"hljs-keyword\">man</span>\n    sysconfdir:    /etc/httpd\n    datadir:       /<span class=\"hljs-keyword\">var</span>/httpd\n    installbuilddir: <span class=\"hljs-variable\">${datadir}</span>/build\n    errordir:      <span class=\"hljs-variable\">${datadir}</span>/<span class=\"hljs-keyword\">error</span>\n    htdocsdir:     <span class=\"hljs-variable\">${datadir}</span>/htdocs\n    cgidir:        <span class=\"hljs-variable\">${datadir}</span>/cgi-bin\n    iconsdir:      <span class=\"hljs-variable\">${prefix}</span>/icons\n    manualdir:     <span class=\"hljs-variable\">${prefix}</span>/manual\n    includedir:    <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">include</span>\n    localstatedir: /<span class=\"hljs-keyword\">var</span>/httpd\n    runtimedir:    <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-keyword\">run</span>\n    logfiledir:    <span class=\"hljs-variable\">${localstatedir}</span>/logs\n    proxycachedir: <span class=\"hljs-variable\">${localstatedir}</span>/proxy\n&lt;/Layout&gt;\n# FHS layout\n&lt;Layout Slackware-FHS&gt;\n    prefix:          /usr\n    exec_prefix:     <span class=\"hljs-variable\">${prefix}</span>\n    bindir:          <span class=\"hljs-variable\">${prefix}</span>/bin\n    sbindir:         <span class=\"hljs-variable\">${prefix}</span>/sbin\n    libdir:          <span class=\"hljs-variable\">${prefix}</span>/lib/httpd\n    libexecdir:      <span class=\"hljs-variable\">${prefix}</span>/lib/httpd/modules\n    installbuilddir: <span class=\"hljs-variable\">${prefix}</span>/lib/httpd/build\n    mandir:          <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">man</span>\n    sysconfdir:      /etc/httpd\n    datadir:         /srv/httpd\n    iconsdir:        <span class=\"hljs-variable\">${datadir}</span>/icons\n    htdocsdir:       <span class=\"hljs-variable\">${datadir}</span>/htdocs\n    manualdir:       <span class=\"hljs-variable\">${htdocsdir}</span>/manual\n    cgidir:          <span class=\"hljs-variable\">${datadir}</span>/cgi-bin\n    errordir:        <span class=\"hljs-variable\">${datadir}</span>/<span class=\"hljs-keyword\">error</span>\n    includedir:      <span class=\"hljs-variable\">${prefix}</span>/<span class=\"hljs-keyword\">include</span>/httpd\n    localstatedir:   /<span class=\"hljs-keyword\">var</span>\n    runtimedir:      <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-keyword\">run</span>/httpd\n    logfiledir:      <span class=\"hljs-variable\">${localstatedir}</span>/<span class=\"hljs-keyword\">log</span>/httpd\n    proxycachedir:   <span class=\"hljs-variable\">${localstatedir}</span>/cache/httpd\n&lt;/Layout&gt;\n</code></pre>\n<blockquote>\n<p>安装目录微调</p>\n</blockquote>\n\n    <pre><code class=\"lang-shell\">-<span class=\"ruby\">-bindir=DIR\n</span>    用户可执行目录dir\n-<span class=\"ruby\">-datadir=DIR\n</span>    web服务器只读的体系无关数据目录DIR，虽然autoconf提供了该选项，但Apache并未使用它\n-<span class=\"ruby\">-includedir=DIR\n</span>    Apache的头文件DIR\n-<span class=\"ruby\">-infodir=DIR\n</span>    信息文档目录DIR 。虽然autoconf提供了该选项，但Apache并未使用它。\n-<span class=\"ruby\">-libdir=DIR\n</span>-<span class=\"ruby\">-libexecdir=DIR\n</span>    程序可执行目录DIR，也就是动态加载模块目录。\n-<span class=\"ruby\">-localstatedir=DIR\n</span>    可写的单一数据目录DIR。\n-<span class=\"ruby\">-mandir=DIR\n</span>-<span class=\"ruby\">-oldincludedir=DIR\n</span>    非gcc的C头文件目录DIR\n-<span class=\"ruby\">-sbindir=DIR\n</span>-<span class=\"ruby\">-sharedstatedir=DIR\n</span>    可写的体系无关数据目录DIR。\n-<span class=\"ruby\">-sysconfdir=DIR\n</span>    配置文件目录，只读的单一数据目录DIR，用于存放httpd.conf和mime.types之类的服务器配置文件。\n</code></pre>\n</li>\n<li><p>系统类型</p>\n<blockquote>\n<p>这些选项用于交叉编译在其他平台上运行的Apache HTTP服务器。在同一平台编译和运行Apache不需要使用这些选项。</p>\n</blockquote>\n\n    <pre><code class=\"lang-shell\">-<span class=\"ruby\">-build=BUILD\n</span>    指定编译文件所在的系统类型BUILD\n-<span class=\"ruby\">-host=HOST\n</span>    指定Apache HTTP服务器将要运行的目标系统类型HOST\n-<span class=\"ruby\">-target=TARGET\n</span></code></pre>\n</li>\n<li><p>模块选项</p>\n<blockquote>\n<p>有两种使用模块的方法:一是静态连接进核心，二是作为DSO模块动态加载;如果编译中包含任何DSO模块，则mod_so会被自动包含进核心。如果希望核心能够装载DSO，但不实际编译任何DSO模块，需指明”–enable-so=static”</p>\n</blockquote>\n<ul>\n<li>一般语法:<ul>\n<li>–disable-MODULE    禁用module模块<ul>\n<li>–enable-MODULE=shared将MODULE编译为DSO(可用于所有模块)</li>\n<li>–enable-MODULE=static将MODULE静态连接进核心(仅用于扩展和实验模块)</li>\n<li>–enable-mod-shared=MODULE-LIST将MODULE-LIST中的所有模块都编译成DSO</li>\n<li>–enable-modules=MODULES-LIST将MODULE-LIST静态连接进核心</li>\n</ul>\n</li>\n</ul>\n</li>\n</ul>\n<p>上述MODULES-LIST可以是:</p>\n<p>​    1.用引号并且用空格分割的模块列表</p>\n<p>​        <code>--enable-mods-shared=&#39;headers rewrite dav&#39;</code></p>\n<p>​    2.”<code>most</code>“(大多数模块［遇见错误模块时忽略该模块而不中断配置过程］)<br>​    3.”<code>all</code>“(所有模块［遇见错误模块时中断配置过程并报错］)</p>\n<p>​            <code>--enable-mods-shared=most</code>    </p>\n<p><strong>注意</strong>:configure将忽略MODULE和MODULE-LIST中的拼写错误，注意仔细拼写。用于MODULE和MODULE-LIST中的名称是”mod<em>NAME”中去掉”mod</em>“并将剩余部分中的下划线”_”替换为连字符”-“以后的结果，比如”mod_log_config”模块应当表示为”log-config”。</p>\n<ul>\n<li><p>多路处理模块(MPM)</p>\n<p>必须有而且只能有一个MPM模块包含进核心，可以使用下面配置进行选择:</p>\n<p>​    –with-mpm=MPM</p>\n<p>​其中，MPM是你想要使用的多路处理模块的名字，如果不使用这个选项，将会使用默认,centos的默认MPM为prefork</p>\n</li>\n<li><p>第三方模块</p>\n<p>有至少两种方法可以添加第三方模块，最简单的方法是作为配置参数提供，语法如下：</p>\n<ul>\n<li><p><code>--with-module=module-type:module-file[, module-type:module-file]</code></p>\n<p><code>module-file</code>是模块的源代码文件名，该文件必须位于Apahe源代码目录树的”<code>modules/module-type</code>“目录下，如果<code>configure</code>没有在那里找到module-file ，则将它看作一个绝对路径名并尝试将其复制到”<code>modules/module-type</code>“目录中，如果”<code>modules/module-type</code>“目录不存在，<code>configure</code>将新建一个”<code>modules/module-type</code>“目录并在其中放置一个标准的<code>Makefile.in</code>文件。这种方法有两个明显的缺陷：模块的源代码必须是单一文件模块只能静态连接进核心，而不能作为DSO模块所以一般并不使用此方法，而是使用<code>apxs</code>(Apache扩展工具)来添加第三方模块支持。</p>\n</li>\n</ul>\n</li>\n</ul>\n</li>\n<li><p>特殊程序包选项</p>\n<ul>\n<li><p>–with-apr=DIR</p>\n</li>\n<li><p>–with-apr-util=DIR</p>\n</li>\n<li><p>–with-ssl=DIR</p>\n</li>\n<li><p>–with-z=DIR</p>\n<blockquote>\n<p>如果你启用了压缩模块(比如<code>mod_deflate</code>)，<code>configure</code>脚本将会自动搜寻已经安装的<code>zlib</code>库，你可以在这里指定它的安装路径。</p>\n</blockquote>\n</li>\n<li><p>–with-perl=DIR</p>\n</li>\n<li><p>–with-prcre=DIR</p>\n</li>\n<li><p>–with-ldap=DIR</p>\n</li>\n</ul>\n</li>\n<li><p>环境变量</p>\n<ul>\n<li>CC<br>  C编译器</li>\n<li>CFLAGS<br>  C编译器的flags</li>\n<li>CPP<br>  C预处理程序</li>\n<li>CPPGLAGS<br>  C/C++预处理程序flags,比如使用”-Iincludedir”指定一个非标准的头文件目录includedir</li>\n<li>LDFLAGS<br>  连接器flags<br>  ​</li>\n</ul>\n</li>\n</ul>\n","categories":[],"tags":[{"name":"HTTP","path":"api/tags/HTTP.json"},{"name":"modules","path":"api/tags/modules.json"}]}